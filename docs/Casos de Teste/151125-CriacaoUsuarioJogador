# üß™ Teste de Cadastro de Usu√°rio e Cria√ß√£o de Jogador

## üéØ Objetivo
Validar o fluxo de registro e associa√ß√£o autom√°tica entre usu√°rio e jogador.

## üß© Pr√©-condi√ß√µes
- Aplica√ß√£o em execu√ß√£o local.
- Postman configurado com `localhost:8080`.

## ‚öôÔ∏è Passos

### 1Ô∏è‚É£ Cadastro de novo usu√°rio

**Descri√ß√£o:**  
Enviar uma requisi√ß√£o `POST /auth/register` com as credenciais b√°sicas de um novo usu√°rio.

**Curl de teste:**
```bash
curl --request POST \
  --url http://localhost:8080/auth/register \
  --header 'Content-Type: application/json' \
  --data '{
    "username": "rafael",
    "email": "rafael@teste.com",
    "password": "123456"
  }'
```
  
**Resultado Esperado**

    ```json
    {
	"token": "<TOKEN>",
	"username": "rafael"
    }
    ```

**Valida√ß√µes:**

- ‚úÖ Deve retornar status HTTP 200 OK.
- ‚úÖ O username retornado deve corresponder ao username enviado no cadastro;

- ‚úÖ Campos obrigat√≥rios n√£o podem estar em branco.
- ‚úÖ A senha deve ter pelo menos 6 caracteres.
- ‚úÖ O email deve estar em formato v√°lido.
- ‚úÖ O nome de usu√°rio deve ter pelo menos 3 caracteres.
- ‚úÖ O nome de usu√°rio n√£o pode exceder 20 caracteres.
- ‚úÖ O email n√£o pode exceder 20 caracteres.
- ‚úÖ A senha n√£o pode exceder 20 caracteres.
- ‚úÖ O nome de usu√°rio n√£o pode conter espa√ßos.
- ‚úÖ A senha n√£o pode conter espa√ßos.
- ‚úÖ O email n√£o pode conter espa√ßos.
- ‚úÖ N√£o deve ser possivel criar um novo registro que username ja existe no sistema.
- ‚úÖ N√£o deve ser possivel criar um novo registro que email ja existe no sistema.

---

### 2Ô∏è‚É£ Verifica√ß√£o de cria√ß√£o do jogador associado

**Descri√ß√£o:**  
Ap√≥s o cadastro, validar se um novo jogador foi criado automaticamente e vinculado ao usu√°rio rec√©m-cadastrado.

**Curl de teste:**
```bash
    curl --request GET \
    --url http://localhost:8080/usuarios \
    --header 'User-Agent: insomnia/12.0.0' \
    --cookie JSESSIONID=0A9891EFA77593692330059A7F822288
```

**Resultado Esperado**

``` json
[
	{
		"id": 1,
		"username": "rafael",
		"email": "rafael@teste.com"
	}
]
```

**Valida√ß√µes:**

- ‚úÖ O novo usu√°rio aparece na listagem de /usuarios.
- ‚úÖ H√° um jogador associado na tabela jogador do banco de dados:
 ``` sql
   SELECT j.id, u.username, u.email
   FROM jogador j
   JOIN usuario u ON j.usuario_id = u.id
   WHERE u.email = 'rafael2@teste.com';
```
- ‚úÖ O campo usuario_id do jogador corresponde ao ID do usu√°rio rec√©m-criado.

## üßæ P√≥s-condi√ß√µes
- Existe um registro em usuario com email = 'rafael2@teste.com'.
- Existe um registro correspondente em jogador com o mesmo usuario_id.
- O JWT retornado √© v√°lido e pode ser reutilizado no endpoint de login ou autentica√ß√£o.

## ‚ö†Ô∏è Observa√ß√µes
- Este teste garante o fluxo base de registro/autocria√ß√£o do jogador.
- N√£o requer pr√©via autentica√ß√£o (endpoint p√∫blico).
- Erros esperados:
```pgsql
409 CONFLICT ‚Üí usu√°rio j√° cadastrado.
400 BAD REQUEST ‚Üí campos obrigat√≥rios ausentes.
```
